<div class="container MT-5">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCnIfK7BtTm8MBkfrDMfbRuXI1zWGJoA6c"
        type="text/javascript"></script>

    <!-- Card do mapa (card lado esquerdo) -->
    <div class="row mt-5">
        <div class="col-8">
            <div class="chart-container px-5 py-4">
                <div class="row">
                    <h3>Lojas</h3>
                    <p class="text-muted">Localização das lojas no mapa</p>
                    <hr>
                </div>
                <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [disableDefaultUI]="false" (mapClick)="addMarker($event.coords.lat, $event.coords.lng)">
                    <agm-marker *ngFor="let m of markers; let i = index" (markerClick)="clickedMarker(m.label, i)"
                        [latitude]="m.lat" [longitude]="m.lng" [label]="m.label" [markerDraggable]="m.draggable">
                        <agm-info-window>
                            <strong>
                                <b>Nome: {{m.label}}</b> <br>
                                Latitude: {{m.lat}} <br>
                                Longitude: {{m.lng}} <br>
                            </strong><br />
                            <!-- <strong>Latitude: {{m.lat}}</strong><br />
                                <strong>Longitude: {{m.lng}}</strong> -->
                        </agm-info-window>
                    </agm-marker>
                </agm-map>
            </div>
        </div>

        <!-- Filtro por localização (card lateral direito) -- Usar gerar informações pro mapa -->
        <div class="col-4 last-order px-5 py-4">
            <h3>Cadastre uma loja</h3>
            <hr>
            <div>
                <label for="nome" class="form-label">Nome</label>
                <input type="text" class="form-control" [(ngModel)]="store.nome">
            </div>
            <div>
                <label for="observacao" class="form-label">Observação</label>
                <input type="text" class="form-control" [(ngModel)]="store.observacao">
            </div>
            <div>
                <label for="cep" class="form-label">CEP</label>
                <input type="text" (focusout)="buscarCep()" class="form-control" id="cep-loja" name="cep-loja" [(ngModel)]="store.cep">
            </div>
            <div class="mt-2">
                <button class="btn btn-primary" type="button" (click)="buscarCep()">Buscar CEP</button>
            </div>
            <div>
                <label for="logradouro" class="form-label">Logradouro</label>
                <input type="text" class="form-control"id="logradouro-loja" name="logradouro-loja" [(ngModel)]="store.logradouro">
            </div>
            <div>
                <label for="numero" class="form-label">Número</label>
                <input type="text" class="form-control"id="numero-loja" name="numero-loja" [(ngModel)]="store.numero">
            </div>
            <div>
                <label for="complemento" class="form-label">Complemento</label>
                <input type="text" class="form-control" id="complemento-loja" name="complemento-loja" [(ngModel)]="store.complemento">
            </div>
            <div>
                <label for="cidade" class="form-label">Cidade</label>
                <input type="text" class="form-control" id="cidade-loja" name="cidade-loja" [(ngModel)]="store.cidade">
            </div>
            <div>
                <label for="bairro" class="form-label">Bairro</label>
                <input type="text" class="form-control" id="bairro-loja" name="bairro-loja" [(ngModel)]="store.bairro">
            </div>
            <div class="form-group">
                <label for="listagem-estado">Estado</label>
                <select class="form-control" id="listagem-estado" name="listagem-estado" [(ngModel)]="store.estado">
                    <option *ngFor="let estado of estados" id="{{estado.id}}"> {{estado.sigla}} </option>
                </select>
            </div>
            <div>
                <label for="Latitude" class="form-label">Latitude</label>
                <input type="text" class="form-control" [value]="latForm" [(ngModel)]="store.latitude">
            </div>
            <div>
                <label for="Longitude" class="form-label">Longitude</label>
                <input type="text" class="form-control" [value]="lngForm" [(ngModel)]="store.longitude">
            </div>
            <br />
            <div class="row mt-2">
                <button class="btn btn-primary" type="button" (click)="create()">Cadastrar Loja</button>
            </div>
        </div>
    </div>


    <!-- Tabela com informações completas das lojas -->
    <br /><br />
    <div class="tableContainer">
        <div class="subContainer">
            <table class="table">
                <thead style="font-weight: bold; font-size: 20px;">
                    <tr>
                        <td>Nome</td>
                        <td>Observação</td>
                        <td>Endereço</td>
                        <td>Cidade</td>
                        <td>Estado</td>
                        <td>Ações</td>
                    </tr>
                </thead>
                <tbody *ngFor="let store of stores">
                    <tr>
                        <td>
                            <div>
                                <p class="id-object">{{store.nome}}</p>
                            </div>
                        </td>
                        <td>
                            <span>{{store.observacao}}</span>
                        </td>
                        <td>
                            <span>{{store.logradouro}}</span>
                        </td>
                        <td>
                            <span>{{store.estado}}</span>
                        </td>
                        <td>
                            <span>{{store.cidade}}</span>
                        </td>
                       
                        <!-- <td>
                            <div class="icon-actions">
                                <div (click)="openUpdateForm(store)">
                                    <fa-icon [icon]="faPenToSquare" size="lg"></fa-icon>
                                </div>
                                <div (click)="delete(store.id)">
                                    <fa-icon class="icon" [icon]="faTrashCan" size="lg"></fa-icon>
                                </div>
                            </div>
                        </td> -->
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="tabbleFooter"></div>
</div>